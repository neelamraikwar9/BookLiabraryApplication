<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bookish</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container">
      <a href="index.html" class="navbar-brand">Bookish</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
        <li class="nav-item"><a href="books.html" class="nav-link">Books</a></li>
        <li class="nav-item"><a href="facts.html" class="nav-link">Facts</a></li>
      </ul>
    </nav>
  </div>
</div>
  </header>


  <main class="container py-3">
    <h1 class="py-3">Add a Book</h1> 

    <div class="mb-3">
    <label for="title">Title:</label><br>
    <input type="text" id="title"  class="form-control" required/>
    </div>

    <div class="mb-3">
    <label for="author">Author:</label><br>
    <input type="text" id="author" class="form-control" required/>
    </div>

    <div class="mb-3">
    <label for="genre">Genre:</label><br>
    <select id="genre" class="form-select" required>
        <option value="Classic">Classic</option>
        <option value="Science Fiction">Science Fiction</option>
        <option value="Music">Music</option>
        <option value="Magazine">Magazine</option>
        <option value="Technology">Technology</option>
    </select>
    </div>

    <div class="mb-3">
    <label for="media">Media Type:</label><br>
    <select id="media" class="form-select" required>
        <option value="Book">Book</option>
        <option value="DVD">DVD</option>
        <option value="Magazine">Magazine</option>
        <option value="Digital Book">Digital Book</option>
    </select>
    </div>

    <button type="button" class="btn btn-primary py-2" id="addButn">Add Book</button>
    <div class="container py-3">
      <ul id="addedBooks"></ul>
    </div>
     
     <h1 class="py-4">Book List</h1>

    <div class="input-group mb-3">     
    <label for="filterGenre">Filter by Genre: 
    <select id="filterGenre" class="form-select" required>
        <option value="All">All Books</option>
        <option value="Classic">Classic</option>
        <option value="Science Fiction">Science Fiction</option>
        <option value="Music">Music</option>
        <option value="Magazine">Magazine</option>
        <option value="Technology">Technology</option>
    </select>
     </label>
    
     <div class="ms-5">
    <label for="filterMedia">Filter by Media: 
    <select id="filterMedia" class="form-select form-control" required>
        <option value="All">All</option>
        <option value="Book">Book</option>
        <option value="DVD">DVD</option>
        <option value="Magazine">Magazine</option>
        <option value="Digital Book">Digital Book</option>
    </select>
    </label>
    </div>
    </div>
    <section class="container py-3">
    <div id="bookList"></div>
    </section>
  </main>
  <br>



<script>
    let libraryData = [
      {
        id: 1,
        title: "The Great Gatsby",
        author: "F. Scott Fitzgerald",
        ISBN: "978-0-7432-7356-5",
        genre: "Classic",
        publicationYear: 1925,
        mediaType: "Book",
        availabilityStatus: "In Stock",
        location: "Fiction Section, Shelf A",
        condition: "Good"
      },
      {
        id: 2,
        title: "The Hitchhiker's Guide to the Galaxy",
        author: "Douglas Adams",
        ISBN: "978-0-345-39180-3",
        genre: "Science Fiction",
        publicationYear: 1979,
        mediaType: "Book",
        availabilityStatus: "Checked Out",
        location: "Science Fiction Section, Shelf B",
        condition: "New"
      },
      {
        id: 3,
        title: "The Beatles Anthology",
        author: "The Beatles",
        ISBN: "978-0811826846",
        genre: "Music",
        publicationYear: 2000,
        mediaType: "DVD",
        availabilityStatus: "On Hold",
        location: "Music Section, Shelf C",
        condition: "Fair"
      },
      {
        id: 4,
        title: "National Geographic",
        author: "Various",
        ISBN: "NG-MAG-2023-001",
        genre: "Magazine",
        publicationYear: 2023,
        mediaType: "Magazine",
        availabilityStatus: "In Stock",
        location: "Periodicals Section, Shelf D",
        condition: "Good"
      },
      {
        id: 5,
        title: "Database Management Essentials",
        author: "Abraham Silberschatz",
        ISBN: "978-0077079611",
        genre: "Technology",
        publicationYear: 2019,
        mediaType: "Digital Book",
        availabilityStatus: "In Stock",
        location: "Technology Section, Shelf E",
        condition: "New"
      }
    ];

   const bookList = document.getElementById('bookList')
   const filterGenre = document.querySelector("#filterGenre")
   const filterMedia = document.querySelector("#filterMedia")
  //  const addButn = document.getElementById("addButn")

   function updateBookList(filteredBooks){
   bookList.innerHTML = "";
   for(let i = 0; i < filteredBooks.length; i++){
    const unorder = document.createElement('ul')
    unorder.className = "list-group"

    const h4 = document.createElement('h4')
    h4.textContent = `${filteredBooks[i].title}`

    const p1 = document.createElement('p')
    p1.textContent = `Author: ${filteredBooks[i].author}`

    const p2 = document.createElement('p')
    p2.textContent = `Genre: ${filteredBooks[i].genre}, Media Type: ${filteredBooks[i].mediaType}`

    const detailBtn = document.createElement('a')
    detailBtn.href = `bookDetails.html?id=${filteredBooks[i].id}`
    detailBtn.className = "btn btn-primary"
    detailBtn.textContent = "Details"

    const list = document.createElement('li')
    list.className = "list-group-item"

    list.appendChild(h4)
    list.appendChild(p1)
    list.appendChild(p2)
    list.appendChild(detailBtn)
    unorder.appendChild(list)

    bookList.appendChild(unorder)
    
   }
   }
   

   const title = document.getElementById("title")
   const author = document.getElementById("author")
   const genre = document.getElementById("genre")
   const media = document.getElementById("media")
   const addButn = document.getElementById("addButn")
   const addedBooks = document.getElementById("addedBooks")

   addButn.addEventListener("click", function(){
    const titleIn = document.getElementById("title").value
   const authorIn = document.getElementById("author").value
   const genreIn = document.getElementById("genre").value
   const mediaIn = document.getElementById("media").value

   if(titleIn && authorIn && genreIn && mediaIn){
    const bookId = libraryData.length + 1
    
    const newBookList = {
        id: bookId,
        title: titleIn,
        author: authorIn,
        genre: genreIn,
        mediaType: mediaIn
      }
      
      libraryData.push(newBookList)
   }
   updateBookList(libraryData)
   })

   filterGenre.addEventListener("change", applyGenereFilter)
   function applyGenereFilter(){
    const selectedGenre = filterGenre.value
    // console.log( "genre:", selectedGenre) 
    const filteredBooks = [];

    for(let i = 0; i < libraryData.length; i++){
      if(libraryData[i].genre === selectedGenre){
        filteredBooks.push(libraryData[i])
         }
         if(selectedGenre === "All"){
          filteredBooks.push(libraryData[i])
    }
    }
// console.log(filteredBooks)
updateBookList(filteredBooks)
   }

   filterMedia.addEventListener("change", applyMediaFilter)
   
   function applyMediaFilter(){
   const selectedMedia = filterMedia.value

   const filteredBooks = []

   for(let i = 0; i < libraryData.length; i++){
    // console.log("inside loop")
    if(libraryData[i].mediaType === selectedMedia){
      // console.log("inside if-else")
      filteredBooks.push(libraryData[i]) 
    }
    if(selectedMedia === "All"){
      filteredBooks.push(libraryData[i])
    }
   }
   updateBookList(filteredBooks)
   }

   updateBookList(libraryData)
</script>


  <footer class="bg-dark text-center py-2 text-light">
    <p class="container" >&copy; 2024 Bookish. All right reserved.</p>
  </footer>
  
</body>
</html>